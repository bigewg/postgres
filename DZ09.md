1. Создала виртуалку и установила постгрес.
2. Запустила pgbench -i postgres
3. Изменила параметры относящиеся к checkpoint
```
checkpoint_timeout = 30s                # range 30s-1d
log_checkpoints = on
```

4. Для удобства открыла 2-ой терминал. В первом буду работать в psql во втором запускать pgbench и смотреть логи.
5. Запомнила первоначальные данные статистики.
```
postgres@dz09:/etc/postgresql/14/main$ psql 
postgres=# select *,pg_current_wal_lsn() from pg_stat_database where datname=current_database() \gset
```
6. Во втором терминале запустила pgbench
```
pgbench -c8 -P 60 -T 600 -U postgres postgres
```
7. После того, как pgbench отработал полностью сравнила статистику, собранную до ее запуска, с текущей.
```
postgres=# select blks_hit-:blks_hit"blk hit",blks_read-:blks_read"blk read",tup_inserted-:tup_inserted"ins",tup_updated-:tup_updated"upd",tup_deleted-:tup_deleted"del",tup_returned-:tup_returned"tup ret",tup_fetched-:tup_fetched"tup fch",xact_commit-:xact_commit"commit",xact_rollback-:xact_rollback"rbk",pg_size_pretty(pg_wal_lsn_diff(pg_current_wal_lsn(),:'pg_current_wal_lsn')) "WAL",pg_size_pretty(temp_bytes-:temp_bytes)"temp" from pg_stat_database where datname=current_database();
 blk hit  | blk read |  ins   |  upd   | del | tup ret | tup fch | commit | rbk |  WAL   |  temp   
----------+----------+--------+--------+-----+---------+---------+--------+-----+--------+---------
 10852682 |     1895 | 291316 | 874130 |   0 | 3837098 |  878589 | 291487 |   0 | 415 MB | 0 bytes
(1 row)
```
Т.к. в кластере другой активности не происходит, то весь объем сгенеренного WAL наш. Нагенерили мы 415Мб.
8. В логе можно увидеть, как происходил процесс контрольной точки и успевали ли мы его закончить к времени начала следующей.
```

```
